webpackJsonp([1],{"+P65":function(t,e){},Fycd:function(t,e){},HBSQ:function(t,e){},IgCv:function(t,e){},NHnr:function(t,e,o){"use strict";function i(t){o("Fycd")}function s(t){o("+P65"),o("T7A0")}function r(t){o("RH02")}function n(t){o("pkN9")}function a(t){o("kNlD")}function l(t){o("IgCv")}Object.defineProperty(e,"__esModule",{value:!0});var c=o("IvJb"),d=(o("z0pV"),{name:"app",created:function(){sessionStorage.getItem("token")?this.$router.push("/"):this.$router.push("/login")}}),h=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"rootContent"},[o("router-view")],1)},u=[],m={render:h,staticRenderFns:u},f=m,g=o("C7Lr"),p=i,y=g(d,f,!1,p,"data-v-21f1b406",null),b=y.exports,w=o("zO6J"),v=o("4YfN"),k=o.n(v),_=o("9rMa"),x=o("L7Pj"),C=o.n(x),S=o("Umb+"),F=o.n(S),$={bp:"http://127.0.0.1:8090",bs:"127.0.0.1:8090"},N=o("7VF+");o("a9n6");var I="circle",T=2,B={"商品权重数据(学生)":!0,"商品实时数据(学生)":!0,"商品权重数据(教师)":!0,"商品实时数据(教师)":!0},H={name:"home",data:function(){return{msg:"商品实时数据监测系统",token:"",tblHeight:C()(window).height()-130,tableData:[],border:!0,a:"点击查看商品详情",total:"",flag:1,goodId:"",height:"",arry1Stu:[],arry2Stu:[],arry1Tch:[],arry2Tch:[],arrxCB:[],arrxCB1:[],flags:1}},created:function(){this.token=window.sessionStorage.getItem("token"),this.initWebpack(),this.initWebpack1(),this.H2=(C()(window).height()-130)/2-20+"px",this.goodId=window.sessionStorage.getItem("key"),window.sessionStorage.getItem("flags")?this.flags=window.sessionStorage.getItem("flags"):this.flags=1},watch:{arry1Tch:function(t,e){this.linePicture()},arry2Tch:function(t,e){this.linePicture()},arry1Stu:function(t,e){this.linePicture1()},arry2Stu:function(t,e){this.linePicture1()}},mounted:function(){this.linePicture(),this.linePicture1()},methods:k()({},Object(_.b)(["loginOut","information"]),{quit:function(){var t=this,e=this;this.$confirm("您确定要退出登录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.loginOut().then(function(o){"退出登录"==o.data.replace(/[\r\n]/g,"")?(e.websock.close(),e.websock1.close(),window.sessionStorage.removeItem("token"),window.sessionStorage.removeItem("key"),window.sessionStorage.removeItem("flags"),t.$router.push("/login")):t.$notify({title:"失败",type:"info",message:result.status})}).catch(function(e){t.$notify({title:"失败",type:"info",message:e})})}).catch(function(){t.$notify({type:"info",message:"已取消登出"})})},clickToDetail:function(t,e){this.arry1Stu=[],this.arry2Stu=[],this.arry1Tch=[],this.arry2Tch=[],this.arrxCB=[],this.arrxCB1=[],this.goodId=t.key,this.websock.send(t.key),window.sessionStorage.setItem("key",t.key),this.flags++,window.sessionStorage.setItem("flags",this.flags)},initWebpack:function(){var t="ws://"+$.bs+"/wbSocketTeacher?topic=";this.websock=new WebSocket(t),this.websock.onopen=this.websocketopen,this.websock.onmessage=this.websocketonmessage,this.websock.onclose=this.websocketclose,this.websock.onerror=this.websocketerror},websocketopen:function(){this.websock.send("teacher"),this.flag<=2&&this.information("teacher")},websocketonmessage:function(t){var e=JSON.parse(t.data);e.key==window.sessionStorage.getItem("key")&&(this.arrxCB.length<=10?this.arrxCB.push(e.window):this.arrxCB.length>10&&(this.arrxCB.shift(this.arrxCB[0].window),this.arrxCB.push(e.window)),this.arry1Tch.length<=10?this.arry1Tch.push(e.avg):this.arry1Tch.length>10&&(this.arry1Tch.shift(this.arry1Tch[0].avg),this.arry1Tch.push(e.avg)),this.arry2Tch.length<=10?this.arry2Tch.push(e.now):this.arry2Tch.length>10&&(this.arry2Tch.shift(this.arry2Tch[0].now),this.arry2Tch.push(e.now)))},linePicture:function(){function t(){var t={color:["red","pink"],title:{text:"商品实时数据展示(教师)",left:"center",top:"20",subtext:e.key,subtextStyle:{color:"#aaa",fontWeight:"bolder",align:"left"}},tooltip:{show:!0,trigger:"axis",axisPointer:"shadow",snap:"snap",formatter:function(t){return t[0].seriesId+"<br/>"+t[0].axisValue+"<br/>"+t[0].data},textStyle:{color:["white"]}},legend:{orient:"vertical",data:["商品权重数据(老师)","商品实时数据(老师)"],selected:B,x:"right",top:80,padding:40,fontSize:"30px"},calculable:!0,grid:{top:140,bottom:50,left:50},xAxis:[{name:"时间/秒",type:"category",boundaryGap:!1,data:e.arrxCB,show:!0}],yAxis:[{name:"涨幅/秒",type:"value",scale:!0}],series:[{name:"商品权重数据(老师)",smooth:!0,type:"line",symbol:I,symbolSize:T,data:e.arry1Tch,markPoint:{data:[{type:"max",name:"最大值"},{type:"min",name:"最小值"}]},markLine:{data:[{type:"average",name:"平均值"}]}},{name:"商品实时数据(老师)",smooth:!0,type:"line",symbol:I,symbolSize:T,data:e.arry2Tch,markPoint:{data:[{type:"max",name:"最大值"},{type:"min",name:"最小值"}]},markLine:{data:[{type:"average",name:"平均值"}]}}]};N.init(document.getElementById("info")).setOption(t)}var e=this;return t(),t},initWebpack1:function(){var t="ws://"+$.bs+"/wbSocket?topic=";this.websock1=new WebSocket(t),this.websock1.onopen=this.websocketopen1,this.websock1.onmessage=this.websocketonmessage1,this.websock1.onclose=this.websocketclose1,this.websock1.onerror=this.websocketerror1},websocketopen1:function(){this.websock1.send(window.sessionStorage.getItem("token")),this.flag<=2&&this.information(window.sessionStorage.getItem("token"))},websocketonmessage1:function(t){var e=JSON.parse(t.data);if(this.tableData.length<200)if(0!==this.tableData.length){var o=this.tableData.some(function(t,o){return t.key==e.key});o||this.tableData.push(e)}else this.tableData.push(e);e.key==window.sessionStorage.getItem("key")&&(this.arrxCB1.length<=10?this.arrxCB1.push(e.window):this.arrxCB.length>10&&(this.arrxCB1.shift(this.arrxCB1[0].window),this.arrxCB1.push(e.window)),this.arry1Stu.length<=10?this.arry1Stu.push(e.avg):this.arry1Stu.length>10&&(this.arry1Stu.shift(this.arry1Stu[0].avg),this.arry1Stu.push(e.avg)),this.arry2Stu.length<=10?this.arry2Stu.push(e.now):this.arry2Stu.length>10&&(this.arry2Stu.shift(this.arry2Stu[0].now),this.arry2Stu.push(e.now)))},websocketclose:function(){},websocketclose1:function(){},linePicture1:function(){function t(){var t={color:["#0c498c","#7c9ad6"],title:{text:"商品实时数据展示(学生)",left:"center",top:"20",subtext:e.key,subtextStyle:{color:"#aaa",fontWeight:"bolder",align:"left"}},tooltip:{show:!0,trigger:"axis",axisPointer:"shadow",snap:"snap",formatter:function(t){return t[0].seriesId+"<br/>"+t[0].axisValue+"<br/>"+t[0].data},textStyle:{color:["white"]}},legend:{orient:"vertical",data:["商品权重数据(学生)","商品实时数据(学生)"],selected:B,x:"right",top:80,padding:40,fontSize:"30px"},calculable:!0,grid:{top:140,bottom:50,left:50},xAxis:[{name:"时间/秒",type:"category",boundaryGap:!1,data:e.arrxCB1,show:!0}],yAxis:[{name:"涨幅/秒",type:"value",scale:!0}],series:[{name:"商品权重数据(学生)",smooth:!0,type:"line",symbol:I,symbolSize:T,data:e.arry1Stu,markPoint:{data:[{type:"max",name:"最大值"},{type:"min",name:"最小值"}]},markLine:{data:[{type:"average",name:"平均值"}]}},{name:"商品实时数据(学生)",smooth:!0,type:"line",symbol:I,symbolSize:T,data:e.arry2Stu,markPoint:{data:[{type:"max",name:"最大值"},{type:"min",name:"最小值"}]},markLine:{data:[{type:"average",name:"平均值"}]}}]};N.init(document.getElementById("info1")).setOption(t)}var e=this;return t(),t}}),destroyed:function(){this.websock.close(),this.websock1.close(),window.sessionStorage.removeItem("key"),window.sessionStorage.removeItem("flags")}},L=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"home"},[o("div",{staticClass:"jp-app-container"},[o("div",{staticClass:"jp-home-header"},[o("div",{staticClass:"logo"},[o("div",{staticStyle:{display:"inline-block"},attrs:{id:"logoDiv"}}),t._v(" "),o("div",{attrs:{id:"homeDiv"}},[t._v(t._s(t.msg))])]),t._v(" "),o("div",{staticClass:"right"},[o("ul",{staticClass:"userInfo"},[t._m(0),t._v(" "),o("li",[t._v(t._s(this.token))])]),t._v(" "),o("div",{staticClass:"logout",on:{click:t.quit}},[t._v("\n            退出\n          ")])])]),t._v(" "),o("div",{staticClass:"jp-home-body"},[o("div",{staticClass:"jp-home-body-left",staticStyle:{"background-color":"#FAFCFB"}},[o("el-table",{staticClass:"table",attrs:{data:t.tableData,height:t.tblHeight,width:"100%"},on:{"cell-click":t.clickToDetail}},[o("el-table-column",{attrs:{align:"center",prop:"key",label:"商品列表"}})],1)],1),t._v(" "),o("div",{staticClass:"jp-home-body-right"},[t.flags>1?o("div",{staticClass:"v1"},[o("h3",{staticStyle:{height:"20px","margin-left":"10px"}},[t._v("商品编号："+t._s(t.goodId))]),t._v(" "),o("div",{style:{height:t.H2},attrs:{id:"info"}}),t._v(" "),o("div",{style:{height:t.H2},attrs:{id:"info1"}})]):t._e(),t._v(" "),1==t.flags?o("div",{staticClass:"v2"},[o("div",{staticClass:"welcome-word"},[t._v("欢迎来到大数据监测平台...")])]):t._e()])])])])},j=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("li",[o("i",{staticClass:"userInfoIcon fa fa-user-circle-o"})])}],W={render:L,staticRenderFns:j},O=W,P=o("C7Lr"),R=s,E=P(H,O,!1,R,"data-v-05613538",null),D=E.exports,z=(o("RaH1"),C()(window).height()),q={name:"Login",data:function(){return{style:"height:"+z+"px",fw:"80px",loginForm:{},rules:{loginName:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},created:function(){},methods:k()({login:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;var o={loginName:e.loginForm.loginName,password:e.loginForm.password},i=e;e.loginIn(o).then(function(t){if(console.log(t.data.trim()),"登录成功"==t.data.trim()){sessionStorage.removeItem("token");e.loginForm.loginName;window.sessionStorage.setItem("token",e.loginForm.loginName),i.$router.push("/")}else e.$message(t.data)}).catch(function(t){console.log("login功能后台报错"+t)})})},register:function(){this.$router.push("/register")}},Object(_.b)(["loginIn"]))},A=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"login",style:t.style},[o("div",{staticClass:"login_content"},[o("div",{staticClass:"login_title"},[t._v("\r\n        杰普大数据监测平台\r\n    ")]),t._v(" "),o("div",{staticClass:"login_body"},[t._m(0),t._v(" "),o("div",{staticClass:"two"},[o("el-form",{ref:"loginForm",staticClass:"demo-ruleForm form",attrs:{model:t.loginForm,rules:t.rules}},[o("el-form-item",{attrs:{prop:"loginName","label-width":t.fw,label:"用户名"}},[o("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:t.loginForm.loginName,callback:function(e){t.$set(t.loginForm,"loginName",e)},expression:"loginForm.loginName"}})],1),t._v(" "),o("el-form-item",{attrs:{prop:"password","label-width":t.fw,label:"密码"}},[o("el-input",{attrs:{type:"password",placeholder:"请输入密码"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.login("loginForm")}},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}})],1),t._v(" "),o("el-row",[o("el-col",{attrs:{span:24}},[o("el-button",{attrs:{id:"submit"},on:{click:function(e){t.login("loginForm")}}},[t._v("登录")]),t._v(" "),o("el-row",{attrs:{type:"flex",justify:"end"}},[o("el-col",{attrs:{span:10}},[t._v("\r\n                  没有账号，请点击 "),o("el-button",{attrs:{type:"text",size:"small",id:"register"},on:{click:t.register}},[t._v(" 注册")])],1)],1)],1)],1)],1)],1)])])])},U=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"one"},[o("div",{staticClass:"left"},[o("p",[t._v("欢迎登录")]),t._v(" "),o("p",[t._v("请输入您的用户名和密码")])]),t._v(" "),o("div",{staticClass:"right"},[o("i",{staticClass:"fa fa-key",staticStyle:{"font-size":"66px"}})])])}],G={render:A,staticRenderFns:U},J=G,M=o("C7Lr"),V=r,Y=M(q,J,!1,V,"data-v-696364ab",null),Q=Y.exports,Z=C()(window).height(),K={name:"Login",data:function(){return{style:"height:"+Z+"px",fw:"65px",registerForm:{loginName:"",password:"",realName:"",demo:""},rules:{loginName:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],realName:[{required:!0,message:"请输入真是姓名",trigger:"blur"}]}}},created:function(){},computed:k()({},Object(_.c)(["info"])),methods:k()({add:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.uniqueStu({loginName:e.registerForm.loginName}).then(function(t){var o=t.data.replace(/[\r\n]/g,"");if("error"==o)return e.registerForm.loginName="",confirm(new Error("用户名已被注册过，请重新输入"));if("ok"==o){var i={loginName:e.registerForm.loginName,password:e.registerForm.password,realName:e.registerForm.realName,demo:e.registerForm.demo};e.registerUser(i).then(function(t){200==t.status?(e.$notify({title:"成功",message:"注册成功",type:"success"}),e.$router.push("/login")):350!=t.status&&e.$notify({title:"失败",message:"注册失败",type:"error"})})}})})}},Object(_.b)(["registerUser","uniqueStu"]))},X=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"login",style:t.style},[o("div",{staticClass:"login_content"},[o("div",{staticClass:"login_title"},[t._v("\r\n        杰普大数据监测平台\r\n    ")]),t._v(" "),o("div",{staticClass:"login_body"},[t._m(0),t._v(" "),o("div",{staticClass:"two"},[o("el-form",{ref:"registerForm",attrs:{model:t.registerForm,rules:t.rules,"status-icon":""}},[o("el-form-item",{attrs:{prop:"loginName","label-width":t.fw,label:"用户名"}},[o("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:t.registerForm.loginName,callback:function(e){t.$set(t.registerForm,"loginName",e)},expression:"registerForm.loginName"}})],1),t._v(" "),o("el-form-item",{attrs:{prop:"password","label-width":t.fw,label:"密码"}},[o("el-input",{attrs:{type:"password",placeholder:"请输入密码"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.register("loginForm")}},model:{value:t.registerForm.password,callback:function(e){t.$set(t.registerForm,"password",e)},expression:"registerForm.password"}})],1),t._v(" "),o("el-form-item",{attrs:{prop:"realName","label-width":t.fw,label:"姓名"}},[o("el-input",{attrs:{placeholder:"请输入真是姓名"},model:{value:t.registerForm.realName,callback:function(e){t.$set(t.registerForm,"realName",e)},expression:"registerForm.realName"}})],1),t._v(" "),o("el-form-item",{attrs:{prop:"demo","label-width":t.fw,label:"备注"}},[o("el-input",{attrs:{type:"textarea",placeholder:"备注信息"},model:{value:t.registerForm.demo,callback:function(e){t.$set(t.registerForm,"demo",e)},expression:"registerForm.demo"}})],1),t._v(" "),o("el-row",[o("el-col",{attrs:{span:24}},[o("el-button",{attrs:{id:"submit"},on:{click:function(e){t.add("registerForm")}}},[t._v("注册")])],1)],1)],1)],1)])])])},tt=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"one"},[o("div",{staticClass:"left"},[o("p",[t._v("欢迎注册")]),t._v(" "),o("p",[t._v("请输入您的相关信息")])]),t._v(" "),o("div",{staticClass:"right"},[o("i",{staticClass:"fa fa-key",staticStyle:{"font-size":"66px"}})])])}],et={render:X,staticRenderFns:tt},ot=et,it=o("C7Lr"),st=n,rt=it(K,ot,!1,st,"data-v-4ef6654f",null),nt=rt.exports,at={name:"home",data:function(){return{}},created:function(){console.log("welcome")},methods:{}},lt=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"detailsShop"},[t._v("\n    欢迎页面\n  ")])},ct=[],dt={render:lt,staticRenderFns:ct},ht=dt,ut=o("C7Lr"),mt=a,ft=ut(at,ht,!1,mt,null,null),gt=ft.exports;c.default.use(w.a);var pt=new w.a({routes:[{path:"/login",component:Q},{path:"/register",component:nt},{path:"/",name:"Home",component:D,redirect:"indexW",children:[{path:"indexW",name:"indexW",component:gt}]}]}),yt=pt,bt=o("H93t"),wt=o.n(bt),vt=(o("TsY+"),{name:"jp-grad-4",props:{border:{type:Boolean,default:!0},leftWidth:{type:String,default:"0.20"},headerH:{type:String,default:"40px"},footerH:{type:String,default:"40px"},themes:{type:Object,default:function(){return{color:"#333"}}}},data:function(){return{}},beforeCreate:function(){},created:function(){},methods:{}}),kt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"jp-grad-box"},[t.$slots.headerLeft?o("div",{staticClass:"jp-header-left",style:{"border-right":t.border?"1px solid #ddd":0,"border-bottom":t.border?"1px solid #ddd":0,width:t.$slots.headerLeft&&t.$slots.headerLeft?100*t.leftWidth+"%":"100%",height:t.headerH,"line-height":t.headerH}},[t._t("headerLeft")],2):t._e(),t._v(" "),t.$slots.headerRight?o("div",{staticClass:"jp-header-right",style:{"border-bottom":t.border?"1px solid #ddd":0,width:t.$slots.headerRight&&t.$slots.headerLeft?100*(1-t.leftWidth)+"%":"100%",height:t.headerH}},[t._t("headerRight")],2):t._e(),t._v(" "),t.$slots.bodyLeft?o("div",{staticClass:"jp-body-left",style:{"border-right":t.border?"1px solid #ddd":0,width:t.$slots.bodyLeft&&t.$slots.bodyRight?100*t.leftWidth+"%":"100%",top:"40px",bottom:t.$slots.footer?t.footerH:"0px",top:t.$slots.headerLeft&&t.$slots.bodyLeft?t.headerH:"0px"}},[t._t("bodyLeft")],2):t._e(),t._v(" "),t.$slots.bodyRight?o("div",{staticClass:"jp-body-right",style:{width:t.$slots.bodyRight&&t.$slots.bodyLeft?100*(1-t.leftWidth)+"%":"100%",top:t.$slots.bodyRight&&t.$slots.headerRight?t.headerH:"0px",bottom:t.$slots.footer?t.footerH:"0px"}},[t._t("bodyRight")],2):t._e(),t._v(" "),t.$slots.footer?o("div",{staticClass:"jp-grad-footer",style:{height:t.footerH,"border-top":t.border?"1px solid #ddd":0,"line-height":t.footerH}},[t._t("footer")],2):t._e()])},_t=[],xt={render:kt,staticRenderFns:_t},Ct=xt,St=o("C7Lr"),Ft=l,$t=St(vt,Ct,!1,Ft,"data-v-c58d8bba",null),Nt=$t.exports;Nt.install=function(t){t.component(SyGrad.name,SyGrad)};var It=Nt,Tt=[It],Bt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.prototype.$isServer||Tt.map(function(o){o.props&&o.props.hasOwnProperty("themes")&&(o.props.themes.default=function(){return e}),t.component(o.name,o),console.log("-------",o.name)})},Ht={version:"1.0.0",install:Bt,Grad4:It},Lt=o("rVsN"),jt=o.n(Lt),Wt=o("2sCs"),Ot=o.n(Wt),Pt=$.bp,Rt={state:{info:[]},getters:{info:function(t){return t.info}},mutations:{allInfo:function(t,e){t.info=e}},actions:{loginOut:function(t,e){return new jt.a(function(t,o){Ot.a.post(Pt+"/logoutUser",F.a.stringify(e)).then(function(e){t(e)}).catch(function(t){o(t)})})},loginIn:function(t,e){return new jt.a(function(o,i){Ot.a.post(Pt+"/loginUser",F.a.stringify(e)).then(function(e){t.commit("allInfo",e),o(e)}).catch(function(t){i(t)})})},registerUser:function(t,e){return new jt.a(function(t,o){Ot.a.post(Pt+"/registerUser",F.a.stringify(e)).then(function(e){t(e)}).catch(function(t){o(t)})})},uniqueStu:function(t,e){return new jt.a(function(o,i){Ot.a.post(Pt+"/findUserByName",F.a.stringify(e)).then(function(e){t.commit("allInfo",e),o(e)}).catch(function(t){i(t)})})}}},Et=$.bp,Dt={state:{prodections:{}},getters:{prodections:function(t){return t.prodections}},mutations:{prodections:function(t,e){t.prodections=e}},actions:{information:function(t,e){return new jt.a(function(o,i){Ot.a.get(Et+"/allWebSocket?topic="+e).then(function(e){t.commit("prodections",e),o(e)}).catch(function(t){i(t)})})}}};c.default.use(_.a);var zt=new _.a.Store({modules:{home:Rt,information:Dt}});o("HBSQ"),o("OGwZ");c.default.config.productionTip=!1,c.default.use(wt.a),c.default.use(Ht),new c.default({el:"#app",router:yt,store:zt,template:"<App/>",components:{App:b}})},OGwZ:function(t,e){},RH02:function(t,e){},RaH1:function(t,e,o){t.exports=o.p+"static/img/bg_1.55d181b.jpg"},T7A0:function(t,e){},"TsY+":function(t,e){},kNlD:function(t,e){},pkN9:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.fb3382e1c8adfa5b4ade.js.map